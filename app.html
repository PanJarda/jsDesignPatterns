<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<style>
			.u-red { color: red }
			.u-green { color: green }
		</style>
	</head>
	<body>
		<script src="Utils.js"></script>
		<script src="Translations.js"></script>
		<script src="State.js"></script>
		<script src="App.js"></script>
		<script>
			(function() {
				"use strict";
				window.addEventListener('DOMContentLoaded', function() {
					DesignPatterns.App.Test.run();
				});
			})();


			function translationTest() {
				var translationTables = {
					'en': {
						'e-mail': 'e-mail',
						'name': 'Name'
					},
					'cs': {
						'surname': 'Příjmení',
						'name': 'Jméno'
					}
				};

				var translationProvider = new Translation.TranslationProvider(translationTables, 'cs');

				var translationFactory = new Translation.TranslationFactory(translationProvider);

				var div = document.createElement('div');
				var name = translationFactory.createTranslation('name');
				div.appendChild(name.getTextNode());
				document.body.appendChild(div);
				
				div = document.createElement('div');
				var surname = translationFactory.createTranslation('surname');
				div.appendChild(surname.getTextNode());
				document.body.appendChild(div);

				var switchLocaleBtn = document.createElement('button');
				var switchLocaleBtnLabel = document.createTextNode('En');
				switchLocaleBtn.appendChild(switchLocaleBtnLabel);
				switchLocaleBtn.addEventListener('click', function() {
					var locale = translationProvider.getLocale();
					translationProvider.setLocale(locale === 'en' ? 'cs' : 'en');
					this.textContent = locale === 'en' ? 'en' : 'cs';
				});

				document.body.appendChild(switchLocaleBtn);
			};

			window.addEventListener('DOMContentLoaded', translationTest);
		</script>
	</body>
</html>